// Row Mixin
=grid-row($nested: false)
  display: flex
  flex-wrap: wrap
  flex-grow: 1
  margin: 0 auto
  @if $nested
    width: auto
    margin: 0 (-$column-gutter / 2)
  @else
    max-width: $row-width

// Row Placeholder and class
@if $use-placeholder
  %row
    +grid-row
  %row-nested
    +grid-row(true)

@if $use-classes
  .row
    +grid-row
    .row
      +grid-row(true)

// Column Mixin
=grid-column($width: 'auto', $collapse: false)
  display: flex

  @if $collapse == false
    padding: 0 $column-gutter / 2

  @if $width == 'auto'
    width: auto
    flex-grow: 1

  @else if length($width) == 1
    width: unquote((nth($width, 1) / $grid-columns * 100) + '%')

  @else if length($width) == 3 and nth($width, 2) == "of"
    width: unquote((nth($width, 1) / nth($width, 3) * 100) + '%')

  @else
    @each $query, $value in $width
      +media-query($query)
        @if $value == auto
          width: auto
          flex-grow: 1
        @else
          width: unquote(($value / $grid-columns * 100) + '%')

// FOR INFO ABOUT EQJS https://github.com/Snugug/eq.js
@if $eq-grid
  // Element Query Setting String
  $eq-setting-string: ()
  @each $eq-name, $eq-value in $breakpoints
    $tmp: $eq-name
    $tmp: str-insert($tmp, #{unquote(": ")}, str-length($tmp)+1)
    $tmp: str-insert($tmp, #{remove-unit($eq-value)}, str-length($tmp)+1)
    $eq-setting-string: append($eq-setting-string, $tmp, comma)

  // The element on we'll add eqjs javascript
  .widget
    &:before
      display: none
      content: '#{inspect($eq-setting-string)}'
  html:before
    display: none
    content: '.widget, .widgets'

